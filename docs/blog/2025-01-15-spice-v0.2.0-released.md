---
slug: spice-v0.2.0-released
title: üéâ Spice Framework v0.2.0 Released - Railway-Oriented Programming
authors: [spice-team]
tags: [release, railway-oriented-programming, error-handling, spice-result]
---

We're thrilled to announce the release of **Spice Framework v0.2.0** üå∂Ô∏è - our biggest update yet! This release introduces comprehensive **Railway-Oriented Programming** with type-safe error handling using `SpiceResult<T>`.

<!--truncate-->

## üö® Breaking Changes Alert

This is a **major breaking change** that requires code updates. All `Agent.processComm()` and `Tool.execute()` methods now return `SpiceResult<T>` instead of direct values.

### What Changed?

**Agent Interface:**
```kotlin
// Before (v0.1.x)
suspend fun processComm(comm: Comm): Comm

// After (v0.2.0)
suspend fun processComm(comm: Comm): SpiceResult<Comm>
```

**Tool Interface:**
```kotlin
// Before (v0.1.x)
suspend fun execute(parameters: Map<String, Any>): ToolResult

// After (v0.2.0)
suspend fun execute(parameters: Map<String, Any>): SpiceResult<ToolResult>
```

## üéØ Why Railway-Oriented Programming?

Railway-Oriented Programming (ROP) is a functional programming pattern that treats error handling like a railway switch:
- **Success track**: Your happy path
- **Failure track**: Your error path

This approach eliminates exceptions for control flow and makes errors explicit in your type signatures.

### The Problem We Solved

**Before v0.2.0:**
```kotlin
// Hidden exceptions - what could go wrong?
suspend fun processUser(id: String): User {
    // Can throw! But the signature doesn't tell you
    return database.getUser(id)
}
```

**With v0.2.0:**
```kotlin
// Explicit errors - compiler forces you to handle them
suspend fun processUser(id: String): SpiceResult<User> {
    return database.getUser(id)
        .map { user -> validateUser(user) }
        .flatMap { validated -> enrichUser(validated) }
        .recover { error ->
            logger.error("Failed: ${error.message}")
            User.default()
        }
}
```

## ‚ú® New Features

### 1. SpiceResult<T> Type System

A sealed class with two variants:
- `Success<T>`: Contains the successful value
- `Failure`: Contains a typed `SpiceError`

```kotlin
sealed class SpiceResult<T> {
    data class Success<T>(val value: T) : SpiceResult<T>()
    data class Failure(val error: SpiceError) : SpiceResult<Nothing>()
}
```

### 2. 11 Typed Error Classes

No more generic exceptions! We have specific error types:

- `AgentError` - Agent-related errors
- `ToolError` - Tool execution errors
- `CommError` - Communication errors
- `ValidationError` - Input validation errors
- `ConfigurationError` - Configuration errors
- `NetworkError` - Network-related errors
- `TimeoutError` - Operation timeout errors
- `PermissionError` - Authorization errors
- `ResourceNotFoundError` - Missing resource errors
- `SerializationError` - Serialization/deserialization errors
- `GenericError` - Catch-all for untyped errors

### 3. Rich Result Operations

Chain operations with confidence:

```kotlin
// map() - Transform success value
result.map { user -> user.name.uppercase() }

// flatMap() - Chain operations
fetchUser(id)
    .flatMap { user -> validateUser(user) }
    .flatMap { validated -> saveUser(validated) }

// fold() - Handle both cases
result.fold(
    onSuccess = { value -> println("Got: $value") },
    onFailure = { error -> println("Error: ${error.message}") }
)

// recover() - Provide fallback
result.recover { error -> defaultValue }

// onSuccess/onFailure() - Side effects
result
    .onSuccess { logger.info("Success!") }
    .onFailure { error -> metrics.recordError(error.code) }
```

## üìä Migration Impact

We've successfully migrated the entire codebase:

- ‚úÖ **18 core files** updated to SpiceResult pattern
- ‚úÖ **13 files** using `.fold()` for result unwrapping
- ‚úÖ **100% compilation success** on main codebase
- ‚úÖ **61 tests passing** with new error handling
- ‚úÖ **5 new test files** demonstrating SpiceResult usage

### Components Updated

**Core:**
- `Agent.kt` - processComm() returns SpiceResult
- `Tool.kt` - execute() returns SpiceResult
- `AgentRuntime` - callAgent() returns SpiceResult

**Advanced:**
- `SwarmAgent` - Multi-agent coordination with error propagation
- `PluggableCommHub` - Event-driven communication with SpiceResult
- `ModernToolChain` - Sequential tool execution with error handling
- `MultiAgentFlow` - All flow strategies (sequential, parallel, competition, pipeline)
- `AgentPersona` - Personality system with error handling
- `TenantAwareAgentRuntime` - Multi-tenancy with error propagation

## üöÄ Quick Migration Example

**Before:**
```kotlin
class MyAgent : BaseAgent(...) {
    override suspend fun processComm(comm: Comm): Comm {
        val result = executeTool("myTool", params)
        return comm.reply(result.result)
    }
}
```

**After:**
```kotlin
class MyAgent : BaseAgent(...) {
    override suspend fun processComm(comm: Comm): SpiceResult<Comm> {
        return executeTool("myTool", params).fold(
            onSuccess = { result ->
                SpiceResult.success(comm.reply(result.result ?: ""))
            },
            onFailure = { error ->
                SpiceResult.failure(error)
            }
        )
    }
}
```

## üìö Documentation

We've created comprehensive documentation to help you migrate:

- **[Migration Guide](https://github.com/no-ai-labs/spice/blob/main/docs/MIGRATION_GUIDE_v0.2.md)** - Step-by-step migration instructions
- **[SpiceResult Guide](/docs/error-handling/spice-result)** - Complete API reference
- **[SpiceError Types](/docs/error-handling/spice-error)** - All error types explained
- **[Best Practices](/docs/error-handling/best-practices)** - Advanced patterns

## üéÅ Benefits

### 1. Type-Safe Error Handling
Errors are now part of the type system - no more surprises!

### 2. Explicit Error Propagation
No hidden exceptions - every error is explicit in the signature.

### 3. Better Composability
Chain operations with `flatMap` without nested try-catch blocks.

### 4. Improved Testing
Easy to test both success and failure paths.

### 5. Railway-Oriented Design
Clear separation of happy path and error path.

### 6. Enterprise-Ready
Robust error handling for production systems.

## üìà What's Next?

We're already working on v0.3.0 with exciting features:
- Enhanced streaming support
- Advanced agent orchestration patterns
- Performance optimizations
- More LLM provider integrations

## üôè Acknowledgments

Special thanks to our contributors and early adopters who provided valuable feedback during the development of this release!

## üì¶ Installation

**Gradle (Kotlin DSL):**
```kotlin
implementation("io.github.no-ai-labs:spice-core:0.2.0")
```

**Gradle (Groovy):**
```groovy
implementation 'io.github.no-ai-labs:spice-core:0.2.0'
```

**Maven:**
```xml
<dependency>
    <groupId>io.github.no-ai-labs</groupId>
    <artifactId>spice-core</artifactId>
    <version>0.2.0</version>
</dependency>
```

## üîó Resources

- [GitHub Repository](https://github.com/no-ai-labs/spice)
- [Full Changelog](https://github.com/no-ai-labs/spice/blob/main/CHANGELOG.md)
- [Documentation](/docs/intro)
- [Examples](https://github.com/no-ai-labs/spice/tree/main/spice-dsl-samples)

---

**Ready to upgrade?** Check out our [Migration Guide](https://github.com/no-ai-labs/spice/blob/main/docs/MIGRATION_GUIDE_v0.2.md) and join our [GitHub Discussions](https://github.com/no-ai-labs/spice/discussions) if you have questions!

Happy coding! üå∂Ô∏è‚ú®
